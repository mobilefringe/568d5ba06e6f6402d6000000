<section class="blog_banner hidden_phone">
    <div class="flexslider blog_banner_slider hidden_phone">
        <ul class="slides" id="blog_banner">
            <script id="blog_banner_template" type="x-tmpl-mustache/text">
                <li>
                    <div id="blog_hero">
                        <div class="main_container hero_container" >
                            <div class="banner_text">
                                <h2 class="banner_title">{{title}}</h2>
                                <p class="blog_date">{{author}}</p>
                                <p class="blog_date">{{publish_date}}</p>
                            </div>
                        </div>
                    </div>
                </li>
            </script>
        </ul>
    </div>
</section>
<section>
    <div id="all_blogs_container">
        <script id="all_blogs_template" type="x-tmpl-mustache/text">
        <div>
            {{body}}
        </div>
        </script>
    </div>
</section>

<style>
    #header {
        background: transparent;
    }
    #features_menu {
        background:rgba(0,0,0,0.8);
    }
</style>
<script>
    $(document).ready(function(e) {
        init(e);
        loadMallDataCached(renderAll); 
    });
    function renderAll () {
        var pathArray = window.location.pathname.split( '/' );
        var slug = pathArray[pathArray.length-1];
        
        var current_post = getPublishedPostDetailsBySlug(slug);
        console.log("current post", current_post);
        renderGeneral('#blog_banner','#blog_banner_template', current_post);
        var all_posts = getBlogDataBySlug("home-mall-maverick-blog").posts.sortBy(function(o){ return o.publish_date})
        renderPostDetails('#all_blogs_container','#all_blogs_template', current_post, all_posts);
        
    
    }
    $(window).load(function(){
        $('.blog_banner_slider').flexslider({
            animation: "slide",
        });
    });
</script>