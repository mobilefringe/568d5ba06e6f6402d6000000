<style>
    .page_banner{
        padding-bottom: 50px;
        margin-bottom: 30px;
    }
</style>

<div id="default_pages">
    <section class="page_banner">
        <div class = "inside_container">
            <h2 class="text-center inside_main_header" id="mm_post_title"></h2>
            <p class="text-center desc banner_text" id="mm_post_author"></p>    
        </div>
    </section>
    <section class="">
        <div class="inside_container">
            <div class="row">
                <main class="col-md-12">
                    <div id="mm_post_content"></div>
                </main>
            </div>
        </div>    
    </section>
</div>
<div id="newsletter_page">
    <section class="page_banner">
        <div class = "inside_container">
            <!--<div id="header_container">-->
              <!--   <script id="header_template" type="x-tmpl-mustache/text">-->
                    <h2 class="text-center inside_main_header" id="newsletter_mm_post_title"></h2>
                    <p class="text-center desc banner_text" id="newsletter_mm_post_author"></p> 
                <!--</script>    -->
            <!--</div>    -->
        </div>
    </section>
    <section class="main_content">
        <div class="inside_container">
            <div class="row">
                <main class="col-md-8">
                    <div id="main_container" class="post_content">
                        <script id="main_template" type="x-tmpl-mustache/text">
                            <figure class="feature_image">
                                <img src="{{image_url}}"/>
                            </figure>
                            <div id="newsletter_mm_post_content"></div>  
                            
                        </script>    
                    </div>
                </main>
                <aside class="col-md-4">
                    <!--<div class="hidden-xs hidden-s features_container">-->
                    <!--    <h4>Other Features</h4>-->
                    <!--    <ul id="features_container">-->
                    <!--        <script id="features_template" type="x-tmpl-mustache/text">-->
                    <!--            <li><a href="{{slug}}" class="contact"><i class="material-icons check_mark">check_circle</i>{{title}}</a></li>-->
                    <!--        </script> -->
                    <!--    </ul>-->
                    <!--</div>-->
                    <div class="contact_container">
                        <h3>Ready to Discuss?</h3>
                        <div class="contact_info">
                            <i class="material-icons contact_icon">phone</i>
                            <h6 class="phone">1-888-854-5797 ext 108</h6>
                        </div>
                        <div class="contact_info">
                            <i class="material-icons contact_icon">email</i>
                            <a href="mailto:contact@mobilefringe.com">contact@mobilefringe.com</a>
                        </div>    
                        <a href="/contact" class="contact_a"><h5>Contact Us</h5></a>
                        <hr>
                    </div>
                    <div id="download_container">
                        <script id="download_template" type="x-tmpl-mustache/text">
                            {{#video_link}}
                            <a href="{{video_link}}" download="{{video_link}}" class="download_btn"><i class="material-icons">file_download</i><span>Download PDF</span></a>
                            {{/video_link}}
                        </script>    
                    </div>
                </aside>      
            </div>
        </div>    
    </section>
</div>
<script>
    $(document).ready(function(e) {                
        init(e);
        
        function renderAll(){
            renderPageHTML();
            
            // var imageName = getImageName();
            // renderPageData('#feature_image_template','#feature_image_container', imageName);
        }
        
        function renderPageHTML(){
            var pathArray = window.location.pathname.split( '/' );
            var slug = pathArray[pathArray.length-1];
            if(slug == "home-newsletterbenefits") {
                $("#newsletter_page").show();
                $("#default_pages").hide();
            }
            else {
                $("#default_pages").show();
                $("#newsletter_page").hide();
            }
            prefix = get_prefix();
            var pages_json = prefix + "/pages/" + slug + ".json"
            console.log(pages_json);
            $.getJSON(pages_json).done(function(data) {
                document.title = data.title;
                $('#mm_post_title').html(data.title);
                $('#mm_post_author').html(data.author);
                $('#newsletter_mm_post_title').html(data.title);
                $('#newsletter_mm_post_author').html(data.author);
                $('#mm_post_content').html(data.body);
                $('#newsletter_mm_post_content').html(data.body);
                console.log(data);
            }); 
        }
        
        function renderPageData(feature_image_template, feature_image_container, imageName){
            var item_list = [];
            var item_rendered = [];
            var banner_template_html = $(feature_image_template).html();
            Mustache.parse(banner_template_html);   // optional, speeds up future uses
            $.each(imageName, function(key, val) {
                val.image_file_name=val.image_file_name;
            });
            $(feature_image_container).show();
            $(feature_image_container).html(item_rendered.join(''));
        }
        
        renderAll();
    });
</script>